{% extends 'base.html' %}
{% block content %}

{% if user.is_authenticated %}

  <div class="container">
    <div class="row mt-3">
      <div class="col-md-6">
        <section class="section1">
          <!-- Content for Section 1 -->
          <div class="card">
            <div class="card-header bg-secondary">
              <h3>Personal Information</h3>
            </div>
            <div class="card-body">

              <div class="row row-cols-2">
                <div class="col"><h5 class="card-title">{{ pii.first_name }} {{ pii.last_name }}</h5></div>
                <div class="col d-flex justify-content-end">
                  <a href="{% url 'edit_pii' %}"><button type="button" class="btn btn-primary mx-1"
                              style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: .75rem;">Edit</button></a>
                </div>
              </div>

              <p class="card-text">{{ pii.city }}, {{ pii.state }}</p>
              <p class="card-text">{{ pii.email }}</p>
              <p class="card-text">{{ pii.phone }}</p>
              <p class="card-text">{{ pii.linked_in }}</p>
              <p class="card-text">{{ pii.facebook }}</p>
              <p class="card-text">{{ pii.about }}</p>
            </div>
          </div>
        </section>
      </div>
      <div class="col-md-6">
        <section class="section2">
          <!-- Content for Section 2 -->
          <div class="card">
            <div class="card-header bg-secondary">
              <h3>Skills</h3>
            </div>

            <div class="card-body">
                <div class="container text-center">
                  <div class="row row-cols-4">
                    {% for skill in uskills %}
                      <div class="col">{{ skill.skill_name }}</div>
                    {% endfor %}
                  </div>
                </div>
              <div class="d-flex" role="search">
                <input class="form-control me-2"
                       type="search"
                       name="skill_input" placeholder="Search skill"
                       hx-get="/skill_search"
                       hx-trigger="input changed delay:500ms, search"
                       hx-target="#search-results"
                       hx-indicator=".htmx-indicator">
              </div>
            </div>

            <div id="search-results" class="mt-2">
              {% include 'skill_search.html' %}
            </div>
          </div>
        </section>
      </div>
    </div>

    <div class="row mt-3">
      <div class="col-md-6">
        <section class="section3">
          <!-- Content for Section 3 -->
          <div class="card border">
            <div class="card-header bg-secondary">
              <h3>Education / Certificates</h3>
            </div>
            <div class="card-body">
              {% for edu in edus %}
              <div class="row row-cols-2">
                <div class="col"><h5>{{ edu.title }}</h5></div>
                <div class="col d-flex justify-content-end">
                  <button type="button" class="btn btn-primary mx-1"
                              style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: .75rem;">Edit</button>
                      <button type="button" class="btn btn-danger mx-1"
                              style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: .75rem;">Delete</button>
                </div>
              </div>
              <p class="card-text">{{ edu.description }}</p>
              <hr />
              {% endfor %}
            </div>

          </div>
        </section>
      </div>
      <div class="col-md-6">
        <section class="section4">
          <!-- Content for Section 4 -->
          <div class="card">
            <div class="card-header bg-secondary">
              <h3>Experience</h3>
            </div>
            <div class="card-body">
              <!-- start -->



              {% for exp in exps %}
              <div class="container">
                <!-- First row with 2 columns -->
                <div class="row rows-cols-3">
                  <div class="col">
                    <div><h5>{{ exp.company }}</h5></div>
                  </div>
                  <div class="col d-flex justify-content-end">
                      {{ exp.start_month }}-{{ exp.start_year}}
                      {% if exp.currently_working %}
                       Current
                      {% else %}
                      {{ exp.end_month }}-{{ exp.end_year}}
                      {% endif %}
                  </div>
                  <div class="col d-flex justify-content-end  ">
                      <button type="button" class="btn btn-primary mx-1"
                              style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: .75rem;">Edit</button>
                      <button type="button" class="btn btn-danger mx-1"
                              style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: .75rem;">Delete</button>
                  </div>
                </div>

                <!-- Second row expanding both columns -->
                <div class="row">
                  <div>
                    <div>
                      <strong>{{ exp.position }}</strong><br />
                      {{ exp.task_one }}<br />
                      {% if exp.task_two %} {{ exp.task_two }}<br />{% endif %}
                      {% if exp.task_three %} {{ exp.task_three }}<br />{% endif %}
                      {% if exp.task_four %} {{ exp.task_four }}<br />{% endif %}
                      {% if exp.task_five %} {{ exp.task_five }}<br />{% endif %}
                      {% if exp.task_six %} {{ exp.task_six }}<br />{% endif %}
                      {% if exp.task_seven %} {{ exp.task_seven }}<br />{% endif %}
                      {% if exp.task_eight %} {{ exp.task_eight }}<br />{% endif %}
                      {% if exp.task_nine %} {{ exp.task_nine }}<br />{% endif %}
                      {% if exp.task_ten %} {{ exp.task_ten }}<br />{% endif %}
                    </div>
                  </div>

                </div>
              </div>
              <hr />
              {% endfor %}
              <!-- end -->
            </div>
          </div>
        </section>
      </div>
    </div>
  </div>


{% endif %}
{% endblock %}